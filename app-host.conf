<VirtualHost *:80>
    ServerName localhost
    
    # Proxy requests to the SvelteKit development server
    ProxyPass /api !
    ProxyPass / http://127.0.0.1:5173/
    ProxyPassReverse / http://127.0.0.1:5173/

    <Directory "/var/www/html/frontend">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Alias for the API
    Alias /api "/var/www/html/backend/public"
    <Directory "/var/www/html/backend/public">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>